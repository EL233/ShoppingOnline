# 购物网站管理后台功能说明

## 修复内容

### 1. 注册页面"Failed to fetch"错误修复
- **问题原因**: API URL配置错误，使用了错误的端口号
- **修复方案**: 将API_URL从`http://localhost:5001/api`修改为`http://localhost:5000/api`
- **文件**: `api.js`

### 2. 登录页面功能增强
- **新增功能**: 添加用户/管理员登录类型选择
- **实现方式**: 
  - 在登录页面添加登录类型选择按钮
  - 支持用户登录和管理员登录两种模式
  - 管理员登录使用固定账号：`admin@example.com` / `admin123`
- **文件**: `personal-center.html`, `style.css`

## 新增管理后台功能

### 1. 管理后台仪表盘 (`admin-dashboard.html`)
- **访问方式**: 选择"管理员登录" → 输入管理员账号 → 进入管理后台
- **功能特点**:
  - 响应式侧边栏导航
  - 数据统计卡片显示
  - 销售趋势图表（使用Chart.js）
  - 商品分类统计饼图

### 2. 商品管理功能
- **商品列表查看**: 支持分页、搜索、筛选
- **新增商品**: 上传图片、填写标题、价格、描述、库存
- **编辑商品信息**: 点击编辑按钮修改商品详情
- **删除商品**: 支持单个商品删除
- **批量导入**: 支持CSV格式导出商品数据
- **分类管理**: 支持动漫、游戏、其他分类

### 3. 用户管理功能
- **用户列表查看**: 显示用户名、邮箱、注册时间
- **用户状态管理**: 支持禁用/启用用户
- **密码重置**: 管理员可重置用户密码
- **用户搜索**: 支持按邮箱搜索用户

### 4. 订单管理功能
- **订单列表**: 查看订单号、下单时间、状态、商品、用户
- **状态管理**: 支持修改订单状态（待支付、已支付、已发货、已完成、已取消）
- **订单详情**: 查看完整订单信息
- **数据导出**: 支持CSV格式导出订单报表

### 5. 财务管理功能
- **收入统计**: 显示今日收入、本月收入、总收入
- **支付记录**: 查看所有支付记录
- **退款管理**: 显示退款明细
- **财务报表**: 支持导出财务数据

### 6. 库存管理功能
- **库存监控**: 实时显示商品库存状态
- **库存报警**: 库存低于阈值时自动提示
- **库存调整**: 支持手动调整商品库存
- **批量操作**: 支持批量库存管理

## 技术实现

### 前端技术
- **HTML5**: 语义化标签，响应式布局
- **CSS3**: Flexbox/Grid布局，动画效果
- **JavaScript ES6+**: 模块化开发，异步处理
- **Chart.js**: 数据可视化图表

### 后端技术
- **Node.js**: 服务器运行环境
- **Express.js**: Web框架
- **MongoDB**: 数据库存储
- **JWT**: 用户认证

### 文件结构
```
ShoppingOnline/
├── admin-dashboard.html    # 管理后台主页面
├── personal-center.html    # 用户/管理员登录页面
├── api.js                 # API接口配置
├── style.css              # 样式文件
├── test-fix.html          # 功能测试页面
└── server/                # 后端服务器代码
    ├── server.js          # 服务器主文件
    └── routes/            # 路由文件
```

## 使用说明

### 1. 启动服务器
```bash
cd /Users/yanp/Code/ShoppingOnline
npm start
```

### 2. 访问网站
- **用户端**: 打开 `http://localhost:5000`
- **管理后台**: 点击"个人中心" → 选择"管理员登录" → 输入 `admin@example.com` / `admin123`

### 3. 测试功能
- 打开 `http://localhost:5000/test-fix.html` 进行功能测试
- 测试API连接、注册流程、登录流程等

## 功能特点

### 1. 响应式设计
- 支持桌面端和移动端访问
- 自适应布局，优化用户体验

### 2. 数据可视化
- 销售趋势折线图
- 商品分类饼图
- 实时数据统计

### 3. 权限管理
- 用户和管理员分离登录
- 管理员专用功能保护
- 安全的身份验证

### 4. 数据管理
- 支持增删改查操作
- 数据导入导出功能
- 实时数据更新

## 测试账号

### 用户账号
- **邮箱**: `test@example.com`
- **密码**: `123456`

### 管理员账号
- **邮箱**: `admin@example.com`
- **密码**: `admin123`

## 注意事项

1. **服务器要求**: 确保Node.js和MongoDB服务正常运行
2. **端口配置**: 默认使用5000端口，如被占用会自动尝试5001端口
3. **数据持久化**: 用户数据存储在MongoDB中，商品数据为前端模拟数据
4. **安全性**: 生产环境需要加强安全配置，如HTTPS、更复杂的密码策略等

## 后续优化建议

1. **数据库集成**: 将商品管理功能与后端数据库集成
2. **图片上传**: 实现真实的图片上传功能
3. **权限细化**: 实现更细粒度的权限控制
4. **日志系统**: 添加操作日志记录
5. **备份恢复**: 实现数据备份和恢复功能
